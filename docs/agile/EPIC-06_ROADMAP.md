# EPIC-06: Roadmap Visuelle - Code Intelligence

**Version**: 1.2.0
**Date**: 2025-10-16 (Updated: Phase 0 COMPLETE)
**DurÃ©e totale**: 13 semaines (3 mois)
**Story Points**: 74 points

---

## ğŸ—ºï¸ Vue d'Ensemble Chronologique

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EPIC-06 Timeline (13 semaines)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Semaine 1                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ PHASE 0: Infrastructure Setup (8 pts)        â”‚              â”‚
â”‚  â”‚ â€¢ Story 0.1: Alembic Async (3 pts)          â”‚              â”‚
â”‚  â”‚ â€¢ Story 0.2: Dual Embeddings (5 pts)        â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                 â”‚
â”‚  Semaines 2-5                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ PHASE 1: Foundation Code (31 pts)            â”‚              â”‚
â”‚  â”‚ â€¢ Story 1: Tree-sitter Chunking (13 pts)    â”‚ S2-3         â”‚
â”‚  â”‚ â€¢ Story 2: Dual Embeddings Int. (5 pts)     â”‚ S4           â”‚
â”‚  â”‚ â€¢ Story 2bis: code_chunks Table (5 pts)     â”‚ S4           â”‚
â”‚  â”‚ â€¢ Story 3: Metadata Extraction (8 pts)      â”‚ S5           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                 â”‚
â”‚  Semaines 6-8                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ PHASE 2: Graph Intelligence (13 pts)         â”‚              â”‚
â”‚  â”‚ â€¢ Story 4: Dependency Graph (13 pts)         â”‚ S6-8         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                 â”‚
â”‚  Semaines 9-11                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ PHASE 3: Hybrid Search (21 pts)              â”‚              â”‚
â”‚  â”‚ â€¢ Story 5: pg_trgm + Vector + RRF (21 pts)  â”‚ S9-11        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                 â”‚
â”‚  Semaines 12-13                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ PHASE 4: API & Integration (13 pts)          â”‚              â”‚
â”‚  â”‚ â€¢ Story 6: Indexing Pipeline (13 pts)       â”‚ S12-13       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Breakdown par Phase

### Phase 0: Infrastructure (Semaine 1) - âœ… COMPLETE
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Story 0.1: Alembic Async (3 pts)   â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… COMPLETE
â”‚ Story 0.2: Dual Embeddings (5 pts) â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% âœ… COMPLETE
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Total: 8/8 pts | Progression: 100% âœ…
```

**Livrables Story 0.1** (2025-10-15 - âœ… COMPLETE):
- âœ… Alembic 1.17.0 installÃ© avec template async
- âœ… `workers/config/settings.py` migrÃ© Pydantic v2 avec dual embeddings
- âœ… `api/alembic/env.py` configurÃ© (psycopg2 sync + NullPool)
- âœ… Baseline NO-OP migration crÃ©Ã©e (9dde1f9db172)
- âœ… Database stamped, `alembic_version` table opÃ©rationnelle
- âœ… Smoke tests passÃ©s (API + DB + Settings)
- âœ… Documentation: `EPIC-06_PHASE_0_STORY_0.1_REPORT.md`

**Livrables Story 0.2** (2025-10-16 - âœ… COMPLETE):
- âœ… `DualEmbeddingService` crÃ©Ã© (EmbeddingDomain: TEXT | CODE | HYBRID)
- âœ… Lazy loading avec double-checked locking (thread-safe)
- âœ… RAM safeguard (bloque CODE model si > 900 MB)
- âœ… Backward compatibility 100% (Adapter pattern)
- âœ… 24 unit tests + 19 regression tests passent
- âš ï¸ RAM rÃ©elle: 1.25 GB TEXT model (vs 260 MB estimÃ©) - stakeholder approved
- âœ… Audit complet: Score 9.4/10 - Production Ready
- âœ… Documentation: `EPIC-06_PHASE_0_STORY_0.2_REPORT.md` + `EPIC-06_PHASE_0_STORY_0.2_AUDIT_REPORT.md`

**Critical Findings Story 0.2**:
- ğŸ› Bug #1 Fixed: Empty HYBRID domain retournait mauvais format
- ğŸ› Bug #2 Fixed: Deprecated `asyncio.get_event_loop()` â†’ `get_running_loop()`
- ğŸ“Š RAM Process = 3-5Ã— model weights (lesson learned pour estimations futures)

---

### Phase 1: Foundation Code (Semaines 2-5)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Story 1: Tree-sitter Chunking (13 pts) â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 42%
â”‚ Story 2: Dual Emb. Int. (5 pts)        â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 16%
â”‚ Story 2bis: code_chunks Table (5 pts)  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 16%
â”‚ Story 3: Metadata Extract. (8 pts)     â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 26%
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Total: 31 pts | DurÃ©e: 4 semaines
```

**Livrables**:
- âœ… Chunking sÃ©mantique via AST (Python, JS, TS, Go, Rust, Java)
- âœ… Table `code_chunks` crÃ©Ã©e avec dual embeddings
- âœ… Metadata extraction (complexity, docstrings, imports, calls)
- âœ… Repository pattern `CodeChunkRepository`

---

### Phase 2: Graph Intelligence (Semaines 6-8)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Story 4: Dependency Graph (13 pts)    â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Total: 13 pts | DurÃ©e: 3 semaines
```

**Livrables**:
- âœ… Call graph extraction (Python AST)
- âœ… Import graph
- âœ… CTE rÃ©cursifs (â‰¤3 hops)
- âœ… API `/v1/code/graph`

---

### Phase 3: Hybrid Search (Semaines 9-11)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Story 5: Hybrid Search (21 pts)           â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”‚  â€¢ pg_trgm similarity (lexical)           â”‚
â”‚  â€¢ pgvector HNSW (semantic)               â”‚
â”‚  â€¢ RRF fusion (k=60)                      â”‚
â”‚  â€¢ Graph expansion (optional)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Total: 21 pts | DurÃ©e: 3 semaines
```

**Livrables**:
- âœ… pg_trgm search opÃ©rationnel
- âœ… Vector search via HNSW
- âœ… RRF fusion (Reciprocal Rank Fusion)
- âœ… Graph expansion optionnel (depth 0-3)
- âœ… API `/v1/code/search`

---

### Phase 4: API & Integration (Semaines 12-13)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Story 6: Indexing Pipeline (13 pts)   â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”‚  â€¢ Code indexing service               â”‚
â”‚  â€¢ Batch processing                    â”‚
â”‚  â€¢ API /v1/code/index                  â”‚
â”‚  â€¢ Documentation OpenAPI               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Total: 13 pts | DurÃ©e: 2 semaines
```

**Livrables**:
- âœ… Pipeline complet (detect â†’ parse â†’ chunk â†’ metadata â†’ graph â†’ embed â†’ store)
- âœ… Endpoint `/v1/code/index`
- âœ… Batch indexing (~100 fichiers)
- âœ… Documentation OpenAPI complÃ¨te
- âœ… UI v4.0 integration

---

## ğŸ¯ Jalons (Milestones)

```
M0: Infrastructure Ready (Fin Semaine 1)
â”œâ”€ Alembic async configurÃ©
â”œâ”€ Dual embeddings opÃ©rationnels
â””â”€ Tests infrastructure passent

M1: Code Indexing Ready (Fin Semaine 5)
â”œâ”€ Chunking sÃ©mantique fonctionne
â”œâ”€ Table code_chunks crÃ©Ã©e
â”œâ”€ Metadata extraction opÃ©rationnelle
â””â”€ Tests foundation passent

M2: Graph Analysis Ready (Fin Semaine 8)
â”œâ”€ Call graph extraction
â”œâ”€ API graph opÃ©rationnelle
â””â”€ Tests graph passent

M3: Search Ready (Fin Semaine 11)
â”œâ”€ Hybrid search opÃ©rationnel
â”œâ”€ API search fonctionnelle
â””â”€ Benchmarks validÃ©s

M4: EPIC-06 Complete (Fin Semaine 13)
â”œâ”€ Pipeline indexing complet
â”œâ”€ Documentation complÃ¨te
â”œâ”€ Tests end-to-end passent
â””â”€ UI v4.0 intÃ©grÃ©e
```

---

## ğŸ“ˆ MÃ©triques de Progression

### Story Points Velocity

| Semaine | Phase | Points PlanifiÃ©s | Points CumulÃ©s | % Complet | Statut |
|---------|-------|------------------|----------------|-----------|---------|
| S1      | Phase 0 | 8 (0.1+0.2)    | 8/74           | 10.8%     | âœ… Story 0.1 (3 pts) COMPLETE<br>âœ… Story 0.2 (5 pts) COMPLETE<br>â³ Phase 1 READY |
| S2-3    | Phase 1 | 13 (Story 1)   | 21/74          | 28%       | â³ NEXT |
| S4      | Phase 1 | 10 (S2+S2bis)  | 31/74          | 42%       |  |
| S5      | Phase 1 | 8 (Story 3)    | 39/74          | 53%       |  |
| S6-8    | Phase 2 | 13 (Story 4)   | 52/74          | 70%       |  |
| S9-11   | Phase 3 | 21 (Story 5)   | 73/74          | 99%       |  |
| S12-13  | Phase 4 | 13 (Story 6)   | 86/74          | 116%*     |  |

*116% = 74 pts planifiÃ©s + 12 pts buffer (contingence restante aprÃ¨s Phase 0 ahead of schedule)

---

## ğŸ”„ DÃ©pendances entre Stories

```
Story 0.1 (Alembic)
    â”‚
    â”œâ”€â”€> Story 2bis (Table code_chunks)
    â”‚        â”‚
    â”‚        â”œâ”€â”€> Story 4 (Graph - needs code_chunks)
    â”‚        â”‚        â”‚
    â”‚        â”‚        â””â”€â”€> Story 5 (Hybrid Search - needs graph)
    â”‚        â”‚                 â”‚
    â”‚        â”‚                 â””â”€â”€> Story 6 (API - needs search)
    â”‚        â”‚
    â”‚        â””â”€â”€> Story 3 (Metadata - reads code_chunks)
    â”‚
    â””â”€â”€> Story 0.2 (Dual Embeddings)
             â”‚
             â”œâ”€â”€> Story 1 (Chunking - uses embeddings indirectly)
             â”‚        â”‚
             â”‚        â””â”€â”€> Story 3 (Metadata - needs chunking)
             â”‚
             â””â”€â”€> Story 2 (Dual Emb. Integration - validates Phase 0)
```

**Chemin critique**: Phase 0 â†’ Story 1 â†’ Story 2bis â†’ Story 4 â†’ Story 5 â†’ Story 6

---

## âš ï¸ Points de DÃ©cision ClÃ©s

### DÃ©cision 1: pg_trgm vs BM25 (Phase 3, Semaine 9)

**Options**:
- A) Utiliser pg_trgm similarity (natif PostgreSQL)
- B) Installer extension pg_search (BM25 vrai)
- C) DÃ©velopper BM25 custom

**Recommandation**: **Option A** (pg_trgm)
- âœ… Natif PostgreSQL
- âœ… Pas de dÃ©pendances externes
- âœ… Performance correcte
- âš ï¸ Pas de vrai BM25 (mais acceptable pour v1.4.0)

**Validation**: Benchmark qualitÃ© search aprÃ¨s Phase 3. Si insuffisant, Ã©valuer pg_search pour v1.5.0.

---

### DÃ©cision 2: Graph Depth Limit (Phase 2, Semaine 6)

**Question**: Quelle profondeur maximale pour graph traversal?

**Options**:
- A) depth â‰¤ 2 (conservatif, rapide)
- B) depth â‰¤ 3 (recommandÃ©)
- C) depth â‰¤ 5 (flexible, risque performance)

**Recommandation**: **Option B** (depth â‰¤ 3)
- âœ… Ã‰quilibre performance/utilitÃ©
- âœ… CTE rÃ©cursifs efficaces
- âœ… Cas d'usage couverts (call chain, import dependencies)

**Validation**: Benchmark latency P95 <20ms avec depth=3 sur codebase ~500 functions.

---

### DÃ©cision 3: Metadata Extraction Languages (Phase 1, Semaine 5)

**Question**: Quels langages supporter pour metadata extraction?

**PrioritÃ© 1 (Must-have)**:
- Python (radon + ast)

**PrioritÃ© 2 (Should-have)**:
- JavaScript / TypeScript (via tree-sitter queries)

**PrioritÃ© 3 (Nice-to-have)**:
- Go, Rust, Java (via tree-sitter queries)

**Recommandation**: ImplÃ©menter Python (P1) en Phase 1, JS/TS (P2) si temps restant, Go/Rust/Java (P3) en v1.5.0.

---

## ğŸš¨ Risques Majeurs & Plans d'Urgence

### Risque 1: Tree-sitter Parsing Failures
**ProbabilitÃ©**: Moyenne | **Impact**: Haut

**SymptÃ´mes**:
- Parsing Ã©choue sur >20% fichiers rÃ©els
- Performance <100ms non atteinte
- Langages non supportÃ©s

**Plan d'urgence**:
1. Activer fallback chunking fixe automatiquement
2. Logger fichiers problÃ©matiques pour debug
3. RÃ©duire langages supportÃ©s (Python only si critique)
4. Reporter multi-langages Ã  v1.5.0

---

### Risque 2: RAM Overflow Dual Embeddings
**ProbabilitÃ©**: Faible | **Impact**: Moyen

**SymptÃ´mes**:
- RAM total > 1 GB
- OOM errors sur CPU modestes
- Latence embedding >200ms

**Plan d'urgence**:
1. Activer quantization FP16 (sentence-transformers)
2. Lazy loading (charger modÃ¨les Ã  la demande)
3. RÃ©duire batch size (32 â†’ 16)
4. Fallback: dÃ©sactiver dual embeddings, utiliser nomic-text uniquement

---

### Risque 3: pg_trgm Insufficient Quality
**ProbabilitÃ©**: Moyenne | **Impact**: Moyen

**SymptÃ´mes**:
- Recall hybrid search <70%
- Precision dÃ©gradÃ©e vs vector-only
- Users reports "search misses obvious code"

**Plan d'urgence**:
1. Augmenter weight vector search dans RRF fusion
2. Ã‰valuer installation pg_search extension (BM25 vrai)
3. Fallback: dÃ©sactiver pg_trgm, vector-only search
4. Documentation: encourager queries sÃ©mantiques vs lexicales

---

## âœ… Checklist Go-Live (Fin Semaine 13)

### Infrastructure
- [x] PostgreSQL 18 + pgvector 0.8.1 opÃ©rationnels âœ… (Phase 0 Story 0.1)
- [x] Alembic 1.17.0 installÃ© et configurÃ© âœ… (Phase 0 Story 0.1)
- [x] Baseline migration crÃ©Ã©e et stampÃ©e âœ… (Phase 0 Story 0.1)
- [x] DualEmbeddingService opÃ©rationnel âœ… (Phase 0 Story 0.2)
- [x] Lazy loading + RAM safeguard actifs âœ… (Phase 0 Story 0.2)
- [x] Backward compatibility 100% validÃ©e âœ… (Phase 0 Story 0.2)
- [ ] Table code_chunks crÃ©Ã©e (main + test DB) (Story 2bis)
- [ ] Index HNSW opÃ©rationnels (EXPLAIN ANALYZE validÃ©) (Story 2bis)
- [ ] pg_trgm extension installÃ©e (Story 5)

### Code Quality
- [ ] Tests coverage >85% (tous nouveaux modules)
- [ ] Linters passent (ruff, mypy)
- [ ] Pre-commit hooks configurÃ©s
- [ ] CI/CD pipeline green

### API
- [ ] Endpoint `/v1/code/index` documentÃ© (OpenAPI)
- [ ] Endpoint `/v1/code/search` documentÃ© (OpenAPI)
- [ ] Endpoint `/v1/code/graph` documentÃ© (OpenAPI)
- [ ] Backward compatibility validÃ©e (API v1 events intacte)
- [ ] Rate limiting configurÃ©

### Performance
- [ ] Indexing <500ms/file (300 LOC) - P95 validÃ©
- [ ] Search hybrid <50ms - P95 validÃ© (10k chunks)
- [ ] Graph traversal <20ms (depth=2) - P95 validÃ©

### Documentation
- [ ] README section Code Intelligence
- [ ] ADRs rÃ©digÃ©es (tree-sitter, jina-code, pg_trgm)
- [ ] Guide utilisateur: comment indexer codebase
- [ ] API docs OpenAPI publiÃ©es
- [ ] CHANGELOG.md mis Ã  jour

### UI
- [ ] Page Code Search intÃ©grÃ©e (UI v4.0)
- [ ] Page Graph Visualization intÃ©grÃ©e
- [ ] Tests E2E UI passent

---

## ğŸ‰ Deliverables Finaux

Ã€ la fin de l'EPIC-06 (Semaine 13), MnemoLite v1.4.0 disposera de:

### FonctionnalitÃ©s
âœ… **Code Indexing**: Pipeline complet (6+ langages)
âœ… **Semantic Chunking**: AST-based (tree-sitter)
âœ… **Dual Embeddings**: Text (nomic-embed-text-v1.5, 137M, 768D) + Code (jina-embeddings-v2-base-code, 161M, 768D)
âœ… **Metadata Extraction**: Complexity, docstrings, imports, calls
âœ… **Dependency Graph**: Call graph, import graph (â‰¤3 hops)
âœ… **Hybrid Search**: pg_trgm + pgvector 0.8.1 + RRF fusion
âœ… **Graph Expansion**: Optionnel (enrich search results)

### API Endpoints
âœ… `POST /v1/code/index` - Index codebase
âœ… `GET /v1/code/search` - Hybrid code search
âœ… `GET /v1/code/graph` - Navigate call graph

### Architecture
âœ… **Tables sÃ©parÃ©es**: `events` (agent memory) + `code_chunks` (code intelligence)
âœ… **Dual embeddings**: ~700 MB RAM total
âœ… **768D everywhere**: Pas de migration DB
âœ… **Backward compatible**: API v1 intacte

### Performance
âœ… **Indexing**: <500ms/file (P95)
âœ… **Search**: <50ms (P95, 10k chunks)
âœ… **Graph**: <20ms (P95, depth=2)

---

**Date**: 2025-10-16
**Version**: 1.2.0 (Updated post-Story 0.2 + Audit)
**Statut**: âœ… **PHASE 0 COMPLETE (100%)** - Phase 1 READY

**ProgrÃ¨s Global**: 8/74 story points (10.8%) | 2/8 stories complÃ¨tes

**DerniÃ¨re ComplÃ©tion**: Story 0.2 - Dual Embeddings Service (2025-10-16)
- DualEmbeddingService crÃ©Ã© (450 lines, EmbeddingDomain enum)
- Lazy loading + RAM safeguard + backward compatibility
- Audit complet: Score 9.4/10 - Production Ready
- 2 bugs critiques corrigÃ©s (empty HYBRID, deprecated API)
- Documentation:
  - `EPIC-06_PHASE_0_STORY_0.2_REPORT.md`
  - `EPIC-06_PHASE_0_STORY_0.2_AUDIT_REPORT.md`

**Prochaine Action**: Kickoff Phase 1 Story 1 (Tree-sitter Integration) - 5 jours (13 pts)

**Achievements Phase 0**:
âœ… 3 jours (vs 5 jours estimÃ©s) - **AHEAD OF SCHEDULE**
âœ… 0 breaking changes API
âœ… Infrastructure robuste et testÃ©e
âœ… RAM safeguard prevents OOM
